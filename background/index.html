<html>
    <head>
      <link href="https://fonts.googleapis.com/css?family=DM+Sans:700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="/treat/main.css"></link>
      <title data-rh="" data-reactroot="">treat – Background</title><meta data-rh="" property="og:title" content="treat – Background" data-reactroot=""/><meta data-rh="" name="twitter:title" content="treat – Background" data-reactroot=""/>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="icon" type="image/png" sizes="16x16" href="https://seek-oss.github.io/treat/favicon-16x16.png" />
      <link rel="icon" type="image/png" sizes="32x32" href="https://seek-oss.github.io/treat/favicon-32x32.png" />
      <link rel="icon" type="image/png" sizes="96x96" href="https://seek-oss.github.io/treat/favicon-96x96.png" />
      <meta property="og:image" content="https://seek-oss.github.io/treat/og-image.png" />
      <meta property="og:image:width" content="1200">
      <meta property="og:image:height" content="600">
      <meta property="og:type" content="website">
      <meta property="og:site_name" content="treat">
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:image" content="https://seek-oss.github.io/treat/og-image.png" />
    </head>
    <body>
        <div id="app"><div class="BxvzV _2NSQv"><div class="_3oIdk _2NSQv"></div><div class="_3oIdk _2NSQv"></div><div class="_3oIdk _2NSQv"></div></div><div class="_1CtRb_2g _2csiM _2NSQv"></div><div class="Gvbnt_2g _2OCYK _2NSQv _13aP5 _2XR0w _21Oi0"><div class="_30DVC_2g _2NSQv _1t0Wl _3pYHr _3chin _1ESaj"><div class="_1Qp7z _2NSQv _3UvtA _1CvmX _17Hbh _1QB85"><div class="_31M3S"><div class="_2NSQv _2a1xY"><a class="_3HInj_2g _1-VGO_2g _3xXGX_2g" href="/treat/">Introduction</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/#requirements">Requirements</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/#basic-usage">Basic usage</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/#themed-usage">Themed usage</a></div></div><div class="_2NSQv _2a1xY"><a aria-current="page" class="_3HInj_2g _1-VGO_2g _3xXGX_2g _3I4HD_2g" href="/treat/background">Background</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/background#tradeoffs">Tradeoffs</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/background#backstory">Backstory</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/background#thanks">Thanks</a></div></div><div class="_2NSQv _2a1xY"><a class="_3HInj_2g _1-VGO_2g _3xXGX_2g" href="/treat/how-it-works">How it works</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/how-it-works#static-extraction">Static extraction</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/how-it-works#theming">Theming</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/how-it-works#runtime">Runtime</a></div></div><div class="_2NSQv _2a1xY"><a class="_3HInj_2g _1-VGO_2g _3xXGX_2g" href="/treat/setup">Setup</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/setup#webpack-setup">Webpack Setup</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/setup#babel-setup">Babel Setup</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/setup#debugging">Debugging</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/setup#server-side-rendering">Server side rendering</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/setup#bundle-splitting">Bundle splitting</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/setup#gatsby-setup">Gatsby Setup</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/setup#next">Next</a></div></div><div class="_2NSQv _2a1xY"><a class="_3HInj_2g _1-VGO_2g _3xXGX_2g" href="/treat/data-types">Data types</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/data-types#styles">Styles</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/data-types#themedstyles">ThemedStyles</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/data-types#theme">Theme</a></div></div><div class="_2NSQv _2a1xY"><a class="_3HInj_2g _1-VGO_2g _3xXGX_2g" href="/treat/styling-api">Styling API</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/styling-api#createtheme">createTheme</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/styling-api#style">style</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/styling-api#stylemap">styleMap</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/styling-api#styletree">styleTree</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/styling-api#globalstyle">globalStyle</a></div></div><div class="_2NSQv _2a1xY"><a class="_3HInj_2g _1-VGO_2g _3xXGX_2g" href="/treat/runtime-api">Runtime API</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/runtime-api#resolvestyles">resolveStyles</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/runtime-api#resolveclassname">resolveClassName</a></div></div><div class="_2NSQv _2a1xY"><a class="_3HInj_2g _1-VGO_2g _3xXGX_2g" href="/treat/react-api">React API</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/react-api#treatprovider">TreatProvider</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/react-api#usestyles">useStyles</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/react-api#useclassname">useClassName</a></div></div><div class="_2NSQv _2a1xY"><a class="_3HInj_2g _1-VGO_2g _3xXGX_2g" href="/treat/webpack-options">Webpack Options</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/webpack-options#outputloaders">outputLoaders</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/webpack-options#test">test</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/webpack-options#localidentname">localIdentName</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/webpack-options#themeidentname">themeIdentName</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/webpack-options#minify">minify</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/webpack-options#browsers">browsers</a></div><div class="_3vWuD _2NSQv _17Hbh"><a class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g" href="/treat/webpack-options#outputcss">outputCSS</a></div></div><div class="_2NSQv _2a1xY"><a class="_3HInj_2g _1-VGO_2g _3xXGX_2g" href="/treat/https://www.github.com/seek-oss/treat">Community</a></div><div class="_2NSQv _21Oi0"><div class="_3vWuD _2NSQv _17Hbh"><a href="https://www.github.com/seek-oss/treat" class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g">GitHub</a></div><div class="_3vWuD _2NSQv _17Hbh"><a href="https://spectrum.chat/treatcss" class="_3UQGS _1rYrD _1-VGO_2g n-Jq5_2g">Spectrum</a></div></div></div></div></div></div><div class="RSpIA_2g"><div class="_30DVC_2g _2NSQv _1t0Wl _3pYHr _3chin _1ESaj"><div class="_2NSQv _3UvtA _2_Ol6"><div class="_2NSQv kDt71"><a href="/treat/"><img src="/treat/3c0f21185028de58e4e604ccdb668206.png" height="36" style="position:relative;left:-6px" alt="treat"/></a><div><div><div class="_2NSQv iAa5- _2hrT8"><h1 class="p8-bl_2g _3epw4_2g _2zJBy_2g TMw1l_2g">Background</h1></div><a id="tradeoffs" class="zOUcz"></a><a style="text-decoration:none" href="#tradeoffs"><h2 class="p8-bl_2g _3epw4_2g _3UR8e_2g _3ee6h_2g">Tradeoffs</h2></a><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">There are plenty of great CSS-in-JS solutions available—and we’re big fans of them. However, treat has taken quite a different approach.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">The primary goals of treat are <strong>full static extraction, minimal runtime code, type safety and legacy browser support.</strong> While a great developer experience is important to us, it will never come at the cost of these goals.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">Unlike a lot of CSS-in-JS approaches, treat is much more similar to <a href="https://github.com/css-modules/css-modules" class="_1rYrD _1-VGO_2g _1ngDw_2g">CSS Modules</a>, requiring a bit more work to bind styles to your components. It’s also unable to generate styles at runtime, which means it cannot handle dynamic theming. The upside of treat is that it allows you to craft themeable, statically extracted CSS using JavaScript (or TypeScript) with little impact to bundle size and negligible runtime performance cost.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">If you’re used to libraries like <a href="https://www.styled-components.com" class="_1rYrD _1-VGO_2g _1ngDw_2g">styled-components</a> or <a href="https://emotion.sh/" class="_1rYrD _1-VGO_2g _1ngDw_2g">Emotion</a>, treat might seem like a step backwards. These libraries can quickly and easily create dynamic component-oriented styles. However, they come with a bundle size and performance cost. For plenty of applications, this is a worthwhile tradeoff—and these libraries are a great choice if this isn’t an issue for you.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">If you’re familiar with static CSS-in-JS libraries like <a href="https://linaria.now.sh/" class="_1rYrD _1-VGO_2g _1ngDw_2g">Linaria</a> and <a href="https://github.com/4Catalyzer/astroturf" class="_1rYrD _1-VGO_2g _1ngDw_2g">Astroturf</a>, treat is very similar but with a couple of notable differences. Firstly, treat’s theming mechanism doesn’t require CSS custom property support (i.e. CSS variables), which means that legacy browsers like IE11 are supported. Secondly, styles are written as objects rather than template literals, to both ensure type safety, and to encourage you to think of your styles as data rather than strings of CSS.</span></p><a id="backstory" class="zOUcz"></a><a style="text-decoration:none" href="#backstory"><h2 class="p8-bl_2g _3epw4_2g _3UR8e_2g _3ee6h_2g">Backstory</h2></a><div class="_1Pq8n_2g _2NSQv _3BBqI xhbfE d7UIW J3rYC"><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">You don’t have to read this to understand treat, but it’ll give you a much better understanding of where we’re coming from.</span></p></div><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">The origins of treat begin with <a href="https://github.com/seek-oss/braid-design-system" class="_1rYrD _1-VGO_2g _1ngDw_2g">Braid</a>, our design system.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">Braid was originally built with CSS Modules, but authored in JavaScript (via <a href="https://github.com/naistran/css-in-js-loader" class="_1rYrD _1-VGO_2g _1ngDw_2g">css-in-js-loader</a>). Unfortunately, we were hitting up against the limits of this approach.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><strong>Problem #1: We were unable to author our CSS Modules in TypeScript.</strong></span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">When you attempt to write your CSS Modules in TypeScript, you export an entire style sheet object (which then gets converted to a CSS Module by <a href="https://github.com/postcss/postcss-js" class="_1rYrD _1-VGO_2g _1ngDw_2g">postcss-js</a>).</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">For example, let’s assume we have the following style sheet:</span></p><pre class="_2NSQv _21Oi0"><div class="_3LobY_2g _2NSQv _19HPD _22_kZ"><div class="_2NSQv _3UvtA _2XR0w _21Oi0 _314bI _1t0Wl _3pYHr _3chin _1ESaj"><div class="_1-VGO_2g _2K8a__2g _1dXPT_2g _4r1dw_2g _2NSQv"><code class="_359SG_2g _2NSQv"><span class="language-jsx" data-language="jsx" data-highlighted-line-numbers=""><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token string">'.someClass'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> <span class="token string">'red'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></div></div></div></pre><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">When importing this file, consumers can only see a flat <code class="_359SG_2g _2NSQv">styles</code> object, which is notably different to the object that was exported.</span></p><pre class="_2NSQv _21Oi0"><div class="_3LobY_2g _2NSQv _19HPD _22_kZ"><div class="_2NSQv _3UvtA _2XR0w _21Oi0 _314bI _1t0Wl _3pYHr _3chin _1ESaj"><div class="_1-VGO_2g _2K8a__2g _1dXPT_2g _4r1dw_2g _2NSQv"><code class="_359SG_2g _2NSQv"><span class="language-jsx" data-language="jsx" data-highlighted-line-numbers=""><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./styles.css.js'</span><span class="token punctuation">;</span>

styles<span class="token punctuation">.</span>someClass<span class="token punctuation">;</span> <span class="token comment">// 'GENERATED_CLASS_NAME'</span>
</span></code></div></div></div></pre><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">The TypeScript compiler can’t make sense of this without an understanding of the transformation happening within webpack. When looking at the raw source code, this doesn’t make sense from a type perspective.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">As a result, even though the rest of our project was now written in TypeScript, we were forced to keep our CSS written in JavaScript. As a workaround, we generated TypeScript declaration files (via our own <a href="https://github.com/seek-oss/css-modules-typescript-loader" class="_1rYrD _1-VGO_2g _1ngDw_2g">css-modules-typescript-loader</a>), but it was less than ideal.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><strong>Problem #2: CSS Modules only provided a single flat namespace to work with.</strong></span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">We were generating themed collections of utility classes and wanted to export multiple namespaces from a single file, e.g. <code class="_359SG_2g _2NSQv">paddingTop</code>, <code class="_359SG_2g _2NSQv">background</code>, <code class="_359SG_2g _2NSQv">color</code>, etc.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">We were forced to manually namespace properties with underscores, which required a lot of boilerplate code to convert these into nested data structures (e.g. converting <code class="_359SG_2g _2NSQv">paddingTop_large</code> into <code class="_359SG_2g _2NSQv">paddingTop.large</code>).</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">TypeScript made this particularly painful because we also had to maintain type definitions for these extra translation steps.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><strong>Potential solution: Runtime CSS-in-JS?</strong></span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">At this point we talked about migrating to a runtime CSS-in-JS library like <a href="https://www.styled-components.com" class="_1rYrD _1-VGO_2g _1ngDw_2g">styled-components</a> or <a href="https://emotion.sh/" class="_1rYrD _1-VGO_2g _1ngDw_2g">Emotion</a>. In fact, if we were starting from scratch, it’s likely we would have simply reached for one of these libraries. That certainly would have solved our immediate problems.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">However, we weren’t starting from scratch. Instead, we were beginning to roll out our new design system to an existing, well-established ecosystem that had grown accustomed to the technical tradeoffs and runtime characteristics of CSS Modules.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">Some of our projects are particularly sensitive to changes in bundle size and runtime performance, and we didn’t want to negatively impact these projects from the outside. Some of our projects are even shipped as standalone JavaScript widgets into external codebases. We wanted to be sure that our new design system wouldn’t come with a noticeable change in footprint.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">We did leave the door open to adopting this architecture in the future, but decided that we wanted to see how far we could go with our current set of tradeoffs.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><strong>Potential solution: Static CSS-in-JS?</strong></span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">The next step for us was to investigate libraries like <a href="https://linaria.now.sh/" class="_1rYrD _1-VGO_2g _1ngDw_2g">Linaria</a> and <a href="https://github.com/4Catalyzer/astroturf" class="_1rYrD _1-VGO_2g _1ngDw_2g">Astroturf</a>, which are both really interesting attempts at getting the best of both worlds—CSS-in-JS without the runtime overhead.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">Unfortunately, neither of them quite fit our particular needs.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><a href="https://github.com/4Catalyzer/astroturf" class="_1rYrD _1-VGO_2g _1ngDw_2g">Astroturf</a> is a really lean solution to this problem, essentially supporting CSS Modules and standard preprocessors within JavaScript template literals. That makes it much more ergonomic than more traditional approaches, but it also inherits all of the limitations we were experiencing with CSS Modules.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><a href="https://linaria.now.sh/" class="_1rYrD _1-VGO_2g _1ngDw_2g">Linaria</a> looked a lot more promising due to its theming support, but it came with an important caveat. Theming is achieved via CSS custom properties (i.e. CSS variables), which means that legacy browsers like IE11 are not supported. This simply wasn’t an option for us.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><strong>Potential solution: Something new?</strong></span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">As a result, we started talking about alternative ideas. Something that could offer the theming ability of Linaria, but without the reliance on CSS variables. Something that could offer the runtime characteristics of CSS Modules, while feeling like regular JavaScript (or, in our case, TypeScript).</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">That’s when the early ideas for treat started to emerge.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">Early API designs looked promising, and initial prototypes proved that the concept could be supported by webpack. We decided to start investing in this approach—slowly at first, but ramping up as it started to further prove itself.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">We continued to refine treat over several months while we simultaneously worked on Braid, with the development of one supporting the other. The code in Braid was now much more maintainable than it was before, and treat ultimately shipped to production, supporting real applications, with only a couple of minor hiccups along the way.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv">After using treat internally for a considerable amount of time, we decided we were finally ready to share treat with the world—and here you are! 😎</span></p><a id="thanks" class="zOUcz"></a><a style="text-decoration:none" href="#thanks"><h2 class="p8-bl_2g _3epw4_2g _3UR8e_2g _3ee6h_2g">Thanks</h2></a><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><strong><a href="https://twitter.com/Jhnnns" class="_1rYrD _1-VGO_2g _1ngDw_2g">Johannes Ewald</a></strong> for letting us have the <code class="_359SG_2g _2NSQv">treat</code> name on npm.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><strong><a href="https://twitter.com/naistran" class="_1rYrD _1-VGO_2g _1ngDw_2g">Nathan Nam Tran</a></strong> for creating <a href="https://github.com/naistran/css-in-js-loader" class="_1rYrD _1-VGO_2g _1ngDw_2g">css-in-js-loader</a>, which served as the initial starting point for our approach.</span></p><p class="_2NSQv _3YWFi"><span class="_1-VGO_2g _1ngDw_2g _2yBs8_2g _4r1dw_2g zeXa4_2g _2NSQv"><strong><a href="https://www.seek.com.au" class="_1rYrD _1-VGO_2g _1ngDw_2g">SEEK</a></strong> for giving us the space to do interesting work.</span></p></div><div style="float:left"><div class="_2NSQv aRtLp kDt71 x2CIq _3ngC_ _24T1o"><svg width="16" height="16" viewBox="0 0 1024 1024" class="_1gD-q _1X6Qk"><path d="M945 266l78 67-510 524-510-524 75-69 435 451 432-449z"></path></svg><div class="_2NSQv KfeNT Ozqrm _3o6Zs"><a class="_1rYrD _1-VGO_2g _1ngDw_2g" href="/treat/">Introduction</a></div></div></div><div style="float:right"><div class="_2NSQv aRtLp kDt71 x2CIq _3ngC_ _24T1o"><div class="_2NSQv KfeNT Ozqrm _3o6Zs"><a class="_1rYrD _1-VGO_2g _1ngDw_2g" href="/treat/how-it-works">How it works</a></div><svg width="16" height="16" viewBox="0 0 1024 1024" class="_1gD-q HwZE9"><path d="M945 266l78 67-510 524-510-524 75-69 435 451 432-449z"></path></svg></div></div></div></div></div></div></div></div>
        <script>window.BASE_URL = "/treat";</script>
        <script src="/treat/client.js"></script>
    </body>
  </html>